<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…³æ³¨ä¹”å·´å¤§æˆ˜Comfyui</title>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f5f5f5; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; }
        .card { background: white; padding: 30px; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; max-width: 400px; width: 85%; }
        h3 { margin-top: 0; color: #333; font-size: 20px; font-weight: bold; }
        p { color: #666; font-size: 14px; line-height: 1.6; margin-bottom: 20px; }
        
        .qr-box img { width: 220px; height: 220px; border-radius: 8px; border: 1px solid #eee; display: block; margin: 0 auto; }
        .qr-tip { font-size: 14px; color: #e64340; font-weight: bold; margin-top: 15px; background: #fff0f0; padding: 10px; border-radius: 4px; display: inline-block;}

        .btn { display: none; padding: 12px 35px; background-color: #07c160; color: white; text-decoration: none; border-radius: 30px; font-size: 16px; font-weight: bold; margin-top: 20px; box-shadow: 0 4px 12px rgba(7, 193, 96, 0.3);}
        
        .version { margin-top: 20px; font-size: 12px; color: #ccc; }
    </style>
</head>
<body>

    <div class="card">
        <h3 id="title">æ¬¢è¿æ¥åˆ°ä¹”å·´å¤§æˆ˜Comfyui</h3>
        
        <div id="qr-area">
            <div class="qr-box">
                <img src="qrcode.jpg" alt="å…¬ä¼—å·äºŒç»´ç ">
            </div>
            <div id="tip-text" class="qr-tip">è¯·ä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«</div>
        </div>

        <a id="jump-btn" class="btn" href="http://weixin.qq.com/r/mp/wRFnf37EaSMWrToc90TT">æ‰“å¼€å¾®ä¿¡å…³æ³¨</a>
    </div>

    <div class="version">Current Version: v3.0 (Fixed)</div>

    <script>
        // 1. è·å–æ‰€æœ‰å…ƒç´ 
        var title = document.getElementById('title');
        var tipText = document.getElementById('tip-text');
        var jumpBtn = document.getElementById('jump-btn');
        var qrArea = document.getElementById('qr-area');
        
        // 2. æ£€æµ‹ç¯å¢ƒ
        var ua = navigator.userAgent.toLowerCase();
        var isWechat = ua.indexOf('micromessenger') !== -1;
        var isMobile = /android|iphone|ipad|ipod/.test(ua);

        // === æ ¸å¿ƒé€»è¾‘ (é¡ºåºæå…¶é‡è¦) ===

        if (isWechat) {
            // ã€åœºæ™¯1ï¼šå¾®ä¿¡å†…éƒ¨ã€‘
            // ç»å¯¹ç¦æ­¢ä»»ä½•è·³è½¬é€»è¾‘ï¼
            title.innerText = "é•¿æŒ‰ä¸‹æ–¹äºŒç»´ç å…³æ³¨";
            tipText.innerText = "ğŸ‘‰ é•¿æŒ‰äºŒç»´ç  -> è¯†åˆ« -> å…³æ³¨";
            jumpBtn.style.display = "none"; // éšè—æŒ‰é’®
            // ä»£ç åˆ°æ­¤ç»“æŸï¼Œä¸æ‰§è¡Œåé¢çš„ setTimeout
            
        } else if (isMobile) {
            // ã€åœºæ™¯2ï¼šæ‰‹æœºæµè§ˆå™¨ (Safari/Chrome/Bç«™)ã€‘
            title.innerText = "æ­£åœ¨å‰å¾€å¾®ä¿¡...";
            tipText.innerText = "å¦‚æœæœªè·³è½¬ï¼Œè¯·ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®";
            jumpBtn.style.display = "inline-block"; // æ˜¾ç¤ºæŒ‰é’®
            
            // åªæœ‰åœ¨è¿™é‡Œæ‰æ‰§è¡Œè·³è½¬
            setTimeout(function() {
                window.location.href = jumpBtn.href;
            }, 1000); // å»¶è¿Ÿ1ç§’è·³è½¬

        } else {
            // ã€åœºæ™¯3ï¼šç”µè„‘ç«¯ã€‘
            title.innerText = "å¾®ä¿¡æ‰«ç å…³æ³¨å…¬ä¼—å·";
            tipText.innerText = "è¯·ä½¿ç”¨æ‰‹æœºå¾®ä¿¡æ‰«ä¸€æ‰«";
            jumpBtn.style.display = "none";
        }
    </script>
</body>
</html>
